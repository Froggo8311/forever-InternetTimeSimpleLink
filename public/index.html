<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Beat Clock</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      @font-face {
        font-family: Cantarell Var;
        font-style: normal;
        font-weight: 100 200 300 400 500 600 700 800 900;
        src: local("Cantarell"), url("https://me.amongtech.cc/Cantarell-VF.woff2") format("woff2");
        font-display: swap;
      }
      :root {
        --bg: #f6f5f4;
        --fg: #000;
      }
      @media only screen and (prefers-color-scheme: dark) {
        :root {
          --bg: #241f31;
          --fg: #fff;
        }
      }
      #beat {
        font-size: 10em;
        font-weight: 300;
	      font-feature-settings: "tnum" 1;
      }
    </style>
  </head>
  <body> 
    <p id="beat">@???</p>
    <p id="subbeat">Time not detected</p>
    <!-- i think the noscript should be a div with an id, so that it can be centered --> <!-- okie-->
      <script>
        // copied from https://codeberg.org/foreverxml/beatclock/src/branch/main/src/window.js
        // this function converts time (optionally specified) into beats
        function beatify(millis = new Date()) {
      	  millis = (millis.getTime() + 3600000) % 86400000;
      	  let currentBeat = Math.floor(millis / 86400);
       	  let len = currentBeat.toString().length;
  	      return len === 1 ? "00" + currentBeat
  		     : len === 2 ? "0" + currentBeat
  		     : currentBeat.toString();
        }
        // remove beat convert to normal time
        function debeatify(beat = beatify()) {
  	     let date = new Date(parseInt(beat) * 86400);
  	     return date;
        }
        // calculate current beat, or show beat from URL
        function loadbeat() {
          let url = window.location.search;
          if (!url) {return;}
          url = url.splice(-3);
          let time = debeatify(url);
          let beatstr = "is equal to " + time.getHours() + ":" + time.getMinutes() + " local time";
          let beats = "@" + url;
          document.getElementById(beat).innerText = beats;
        }
      </script>
  </body>
</html>